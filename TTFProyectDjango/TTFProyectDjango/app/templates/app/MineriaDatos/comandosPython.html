{% extends "app/plantillaBase.html" %}

{% block content %}
<h2>{{title}}</h2>

<section class="pyscript">
    <py-config>
        packages = [
            "pandas",
            "seaborn",
            "matplotlib",
            "scipy"
        ]
        plugins = [
            "https://pyscript.net/latest/plugins/python/py_tutor.py"
        ]
    </py-config>
    <py-tutor>
        <py-script>

            # Packetes python

            import pandas as pd
            from pyodide.http import open_url
            import seaborn as sns
            import matplotlib.pyplot as plt
            from scipy.io import arff

            # Funcion que carga un dataset
            def obtenerDatasetCSV(url, cols):
                dataset = pd.read_csv(open_url(url), header=None, names=cols)
                return dataset

            # Funcion que muestra la descripcion de un dataset
            def mostrarDescripcionDatasetCSV(dataset):
                display(dataset.describe())

            # Funcion que muestra el grado de relación de las características de un dataset
            def correlacionDataset(dataset):
                display(dataset.corr())

            # Funcion que muestra las clases de un dataset
            def mostrarClasesDataset(dataset,cad):
                sns.countplot(x=cad, data=dataset); plt.title('Clases dataset ')
                display(plt)
                plt.clf()

            # Funcion que muestra la distribucion de los datos de 2 caracteristicas pertenientes a las clases de un dataset
            def distribucionDatosDataset(X,Y, HUE, dataset):
                sns.scatterplot(x=X, y=Y, hue=HUE, data = dataset)
                plt.title("Sepal length - width")
                plt.legend()
                display(plt)
                plt.clf()

            # Funcion que muestra la informacion de un dataset
            def mostrarInformacionDatasetCSV(dataset):
                display(dataset.info())

            def main():
                iris = obtenerDatasetCSV("https://raw.githubusercontent.com/p72losaj/Datasets/main/iris.data", 
                                            ["sepal length","sepal width","petal length","petal width","Species"])
                data_arff = arff.loadarff(open_url("https://raw.githubusercontent.com/p72losaj/Datasets/main/segment-challenge.arff"))
                df = pd.DataFrame(data_arff[0]).select_dtypes([object]).stack().str.decode('utf-8').unstack()
                mostrarClasesDataset(df, "class")
                

            if __name__ == "__main__":
                main()
        </py-script>
    </py-tutor>

</section>

{% endblock %}
