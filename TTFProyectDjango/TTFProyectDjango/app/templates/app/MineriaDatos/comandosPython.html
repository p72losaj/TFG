{% extends "app/plantillaBase.html" %}

{% block content %}
<h2>{{title}}</h2>

<section class="pyscript">
    <py-config>
        packages = [
            "pandas",
            "seaborn",
            "matplotlib",
            "scipy",
            
        ]
        plugins = [
            "https://pyscript.net/latest/plugins/python/py_tutor.py"
        ]
    </py-config>
    <py-tutor>
        <py-script>

            # Packetes python
            import pandas as pd
            from pyodide.http import open_url
            import seaborn as sns
            import matplotlib.pyplot as plt

            # Funcion que carga un dataset
            def cargarDatasets():
                # Dataset iris
                iris = pd.read_csv(open_url("https://raw.githubusercontent.com/p72losaj/Datasets/main/iris.data"), 
                                                header=None, 
                                                names=["sepal length","sepal width","petal length","petal width","Species"])
                # Dataset titanic
                titanic = pd.read_csv(open_url("https://raw.githubusercontent.com/p72losaj/Datasets/main/titanic.csv"))
                
                return iris,titanic
            
            # Funcion que realiza distintos tipos de analisis de la informacion de un dataset
            def analisisDatos(dataset, opcion, clase, etiqueta):
                # Mostramos el dataset
                if opcion == 0:
                    display(dataset)
                # Informacion del dataset
                elif opcion == 1:
                    display(dataset.info())
                # Correlacion columnas dataset
                elif opcion == 2:
                    display(dataset.corr(numeric_only=True))
                # Descripcion del dataset
                elif opcion == 3:
                    display(dataset.describe())
                # Clases del dataset
                elif opcion == 4:
                    sns.countplot(x=clase, data=dataset)
                    plt.title('Clases dataset')
                    display(plt)
                    plt.clf()
                # Distribucion datos
                elif opcion == 5:
                    sns.displot(dataset, x=etiqueta, col=clase)
                    display(plt)
                    plt.clf()
            
            
            # Funcion principal
            def main():
                # Obtenemos los datasets
                iris,titanic = cargarDatasets()
                # Analizamos la informacion del dataset
                analisisDatos(,0,"","")
                analisisDatos(titanic,1,"Survived","Pclass")
                analisisDatos(titanic,2,"Survived","Pclass")
                analisisDatos(titanic,3,"Survived","Pclass")
                analisisDatos(titanic,4,"Survived","Pclass")
                analisisDatos(titanic,5,"Survived","Pclass")
            if __name__ == "__main__":
                main()
        </py-script>
    </py-tutor>

</section>

{% endblock %}
